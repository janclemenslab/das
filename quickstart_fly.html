<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="GUI documentation" href="tutorials_gui/tutorials_gui.html" /><link rel="prev" title="Installation" href="installation.html" />

    <!-- Generated with Sphinx 4.5.0 and Furo 2023.03.27 -->
        <title>Quick start tutorial (fly) - DAS documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?digest=fad236701ea90a88636c2a8c73b44ae642ed2a53" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinxcontrib-images/LightBox2/lightbox2/dist/css/lightbox.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">DAS  documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand centered" href="index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="_static/icon.png" alt="Logo"/>
  </div>
  
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Quick start tutorial (fly)</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="tutorials_gui/tutorials_gui.html">GUI documentation</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="tutorials_gui/load.html">Load and view data</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials_gui/annotate.html">Annotate song</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials_gui/train.html">Train</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials_gui/predict.html">Predict</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="tutorials/tutorials.html">Programming documentation</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="tutorials/convert.html">Convert your own annotations and audio data</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials/make_ds_notebook.html">Make a dataset from custom data formats</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials/train.html">Train</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials/predict.html">Predict</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials/colab.html">Training and inference with colab</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials/structparams.html">Choice of structural network parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials/architecture_tuning.html">Architecture tuning</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials/experiment_tracking.html">Experiment tracking with Weights &amp; Biases</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials/label_segments.html">Generate segment labels</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials/evaluate_fly.html">Evaluate a sine and pulse network</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials/evaluate_bird.html">Evaluate a bird song network</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials/realtime.html">Annotate audio in realtime</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="unsupervised/unsupervised.html">Unsupervised classification</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="unsupervised/flies.html">Courtship song of flies</a></li>
<li class="toctree-l2"><a class="reference internal" href="unsupervised/birds.html">Song of Bengalese finches</a></li>
<li class="toctree-l2"><a class="reference internal" href="unsupervised/mice.html">Ultrasonic vocalizations from mice</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="technical/technical.html">Technical details</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="technical/cli.html">Command line interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="technical/data_formats.html">Data formats</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="api.html">Developer API</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="api/das.annot.html">das.annot</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/das.augmentation.html">das.augmentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/das.block_stratify.html">das.block_stratify</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/das.data.html">das.data</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/das.data_hash.html">das.data_hash</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/das.evaluate.html">das.evaluate</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/das.event_utils.html">das.event_utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/das.io.html">das.io</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/das.make_dataset.html">das.make_dataset</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/das.menagerie.html">das.menagerie</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/das.models.html">das.models</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/das.models_legacy.html">das.models_legacy</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/das.npy_dir.html">das.npy_dir</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/das.postprocessing.html">das.postprocessing</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/das.predict.html">das.predict</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/das.pulse_utils.html">das.pulse_utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/das.segment_utils.html">das.segment_utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/das.spec_utils.html">das.spec_utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/das.tracking.html">das.tracking</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/das.train.html">das.train</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/das.train_tune.html">das.train_tune</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/das.utils.html">das.utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/das.utils_plot.html">das.utils_plot</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/das.tcn.tcn.html">das.tcn.tcn</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/das.tcn.tcn_new.html">das.tcn.tcn_new</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/das.kapre.augmentation.html">das.kapre.augmentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/das.kapre.backend.html">das.kapre.backend</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/das.kapre.backend_keras.html">das.kapre.backend_keras</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/das.kapre.filterbank.html">das.kapre.filterbank</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/das.kapre.time_frequency.html">das.kapre.time_frequency</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/das.kapre.utils.html">das.kapre.utils</a></li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="quick-start-tutorial-fly">
<h1>Quick start tutorial (fly)<a class="headerlink" href="#quick-start-tutorial-fly" title="Permalink to this headline">#</a></h1>
<p>This quick start tutorial walks through all steps required to make <em>DAS</em> work with your data, using a recording of fly song as an example. A comprehensive documentation of all menus and options can be found in the <a class="reference internal" href="tutorials_gui/tutorials_gui.html"><span class="doc std std-doc">GUI documentation</span></a>.</p>
<p>In the tutorial, we will train <em>DAS</em> using an iterative and adaptive protocol that allows to quickly create a large dataset of annotations: Annotate a few song events, fast-train a network on those annotations, and then use that network to predict new annotations on a larger part of the recording. These first predictions require manually correction, but correcting is typically much faster than annotating everything from scratch. This correct-train-predict cycle is then repeated with ever larger datasets until network performance is satisfactory.</p>
<section id="download-example-data">
<h2>Download example data<a class="headerlink" href="#download-example-data" title="Permalink to this headline">#</a></h2>
<p>To follow the tutorial, download and open this <a class="reference external" href="https://github.com/janclemenslab/DAS/releases/download/data/Dmel_male.wav">audio file</a>. The recording is of a <em>Drosophila melanogaster</em> male courting a female, recorded by David Stern (Janelia, part of <a class="reference external" href="https://www.janelia.org/lab/stern-lab/tools-reagents-data">this dataset</a>). We will walk through loading, annotating, training and predicting using this file as an example.</p>
</section>
<section id="start-the-gui">
<h2>Start the GUI<a class="headerlink" href="#start-the-gui" title="Permalink to this headline">#</a></h2>
<p>Install <em>DAS</em> following these <a class="reference internal" href="installation.html"><span class="doc std std-doc">instructions</span></a>. Then start the GUI by opening a terminal, activating the conda environment created during install and typing <code class="docutils literal notranslate"><span class="pre">das</span> <span class="pre">gui</span></code>:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>conda<span class="w"> </span>activate<span class="w"> </span>das
das<span class="w"> </span>gui
</pre></div>
</div>
<p>The following window should open:</p>
<figure class="align-default" id="xb-start-fig">
<a class="reference internal image-reference" href="_images/xb_start.png"><img alt="start screen" src="_images/xb_start.png" style="width: 450px;" /></a>
<figcaption>
<p><span class="caption-text">Start screen.</span><a class="headerlink" href="#xb-start-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
</section>
<section id="load-audio-data">
<h2>Load audio data<a class="headerlink" href="#load-audio-data" title="Permalink to this headline">#</a></h2>
<p>Choose <em>Load audio from file</em> and select the downloaded recording of fly song.</p>
<p>In the dialog that opens, leave everything as is except set <em>Minimal/Maximal spectrogram frequency</em>—the range of frequencies in the spectrogram display—to 50 and 1000 Hz. This will restrict the spectrogram view to only show the frequencies found in fly song.</p>
<figure class="align-default" id="xb-load-fig">
<img alt="loading screen" src="_images/xb_quick_load.png" />
<figcaption>
<p><span class="caption-text">Loading screen.</span><a class="headerlink" href="#xb-load-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
</section>
<section id="waveform-and-spectrogram-display">
<h2>Waveform and spectrogram display<a class="headerlink" href="#waveform-and-spectrogram-display" title="Permalink to this headline">#</a></h2>
<p>Loading the audio will open a window that displays the first second of audio as a waveform (top) and a spectrogram (bottom). You will see the two major modes of fly song—pulse and sine. The recording starts with sine song—a relatively soft oscillation resulting in a spectral power at ~150 Hz. Pulse song starts after ~0.75 seconds, evident as trains of brief wavelets with a regular interval.</p>
<p>To navigate the view: Move forward/backward along the time axis via the <code class="docutils literal notranslate"><span class="pre">A</span></code>/<code class="docutils literal notranslate"><span class="pre">D</span></code> keys and zoom in/out the time axis with the <code class="docutils literal notranslate"><span class="pre">W</span></code>/<code class="docutils literal notranslate"><span class="pre">S</span></code> keys (see also the <em>Playback</em> menu). You can also navigate using the scroll bar below the spectrogram display or jump to specific time points using the text field to the right of the scroll bar. The temporal and frequency resolution of the spectrogram can be adjusted with the <code class="docutils literal notranslate"><span class="pre">R</span></code> and <code class="docutils literal notranslate"><span class="pre">T</span></code> keys.</p>
<p>You can play back the waveform on display through your headphones/speakers by pressing <code class="docutils literal notranslate"><span class="pre">E</span></code>.</p>
<figure class="align-default" id="xb-display-fig">
<a class="reference internal image-reference" href="_images/xb_quick_view.png"><img alt="waveform and spectrogram display" src="_images/xb_quick_view.png" style="width: 100%;" /></a>
<figcaption>
<p><span class="caption-text">Waveform (top) and spectrogram (bottom) display of fly song.</span><a class="headerlink" href="#xb-display-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
</section>
<section id="initialize-or-edit-song-types">
<h2>Initialize or edit song types<a class="headerlink" href="#initialize-or-edit-song-types" title="Permalink to this headline">#</a></h2>
<p>Before you can annotate song, you need to register the sine and pulse song types for annotation. <em>DAS</em> discriminates two principal categories of song types:</p>
<ul class="simple">
<li><p><em>Segments</em> are song types that extend over time and are defined by a start and a stop time. The aforementioned sine song and the syllables of mouse and bird vocalizations fall into the segment category.</p></li>
<li><p><em>Events</em> are defined by a single time of occurrence. The aforementioned pulse song is a song type of the event category.</p></li>
</ul>
<p>Add two new song types for annotation via the <em>Add/edit</em> button at the top of the windows or via the <em>Annotations/Add or edit song types</em> menu: ‘pulse’ of category ‘event’ and ‘sine’ of category ‘segment’:</p>
<figure class="align-default" id="xb-make-fig">
<a class="reference internal image-reference" href="_images/xb_quick_make.png"><img alt="edit annotation types" src="_images/xb_quick_make.png" style="height: 400px;" /></a>
<figcaption>
<p><span class="caption-text">Create two new song types for annotation.</span><a class="headerlink" href="#xb-make-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
</section>
<section id="create-annotations-manually">
<h2>Create annotations manually<a class="headerlink" href="#create-annotations-manually" title="Permalink to this headline">#</a></h2>
<p>The two new song types <em>pulse</em> or <em>sine</em> can now be activated for annotation using the dropdown menu on the top left of the window. The active song type can also be changed with the number keys indicated in the dropdown menu—in this case <code class="docutils literal notranslate"><span class="pre">1</span></code> activates pulse, <code class="docutils literal notranslate"><span class="pre">2</span></code> activates sine.</p>
<p>Song is annotated by left-clicking the waveform or spectrogram view. If an event-like song type is active, a single left click marks the time of an event. A segment-like song type requires two clicks—one for each boundary of the segment.</p>
<figure class="align-default" id="xb-create-fig">
<a class="reference internal image-reference" href="_images/xb_create.gif"><img alt="annotate song" src="_images/xb_create.gif" style="width: 700px;" /></a>
<figcaption>
<p><span class="caption-text">Left clicks in waveform or spectrogram view create annotations.</span><a class="headerlink" href="#xb-create-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
</section>
<section id="annotate-by-thresholding-the-waveform">
<h2>Annotate by thresholding the waveform<a class="headerlink" href="#annotate-by-thresholding-the-waveform" title="Permalink to this headline">#</a></h2>
<p>Annotation of events can be sped up with a “Thresholding mode”, which detects peaks in the sound energy exceeding a threshold. Activate thresholding mode via the <em>Annotations</em> menu. This will display a draggable horizontal line—the detection threshold—and a smooth pink waveform—the envelope of the waveform. Adjust the threshold so that only “correct” peaks in the envelope cross the threshold and then press <code class="docutils literal notranslate"><span class="pre">I</span></code> to annotate these peaks as events.</p>
<figure class="align-default" id="xb-thres-fig">
<a class="reference internal image-reference" href="_images/xb_thres.gif"><img alt="annotate song" src="_images/xb_thres.gif" style="width: 700px;" /></a>
<figcaption>
<p><span class="caption-text">Annotations assisted by thresholding and peak detection.</span><a class="headerlink" href="#xb-thres-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
</section>
<section id="edit-annotations">
<h2>Edit annotations<a class="headerlink" href="#edit-annotations" title="Permalink to this headline">#</a></h2>
<p>In case you misclicked, you can edit and delete annotations. Edit event times and segment bounds by dragging the lines or the boundaries of segments. Drag the shaded area itself to move a segment without changing its duration. Movement can be disabled completely or restricted to the currently selected annotation type via the <em>Annotations</em> menu.</p>
<p>Delete annotations of the active song type by right-clicking on the annotation. Annotations of all song types or of only the active one in the view can be deleted with <code class="docutils literal notranslate"><span class="pre">U</span></code> and <code class="docutils literal notranslate"><span class="pre">Y</span></code>, respectively, or via the <em>Annotations</em> menu.</p>
<figure class="align-default" id="xb-edit-fig">
<a class="reference internal image-reference" href="_images/xb_edit.gif"><img alt="annotate song" src="_images/xb_edit.gif" style="width: 700px;" /></a>
<figcaption>
<p><span class="caption-text">Dragging moves, right click deletes annotations.</span><a class="headerlink" href="#xb-edit-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>Change the label of an annotation via CMD/CTRL+Left click on an existing annotation. The type of the annotation will change to the currently active one.</p>
</section>
<section id="export-annotations-and-make-a-dataset">
<h2>Export annotations and make a dataset<a class="headerlink" href="#export-annotations-and-make-a-dataset" title="Permalink to this headline">#</a></h2>
<p><em>DAS</em> achieves good performance from few annotated examples. Once you have completely annotated the song in the first 18 seconds of the tutorial recording—<em>all</em> pulses and sine song segments in that section of the song—you can train a network to help with annotating the rest of the data.</p>
<p>Training requires the audio data and the to be in a <a class="reference internal" href="technical/data_formats.html"><span class="doc std std-doc">specific format</span></a>. First, export the audio data and the annotations via <code class="docutils literal notranslate"><span class="pre">File/Export</span> <span class="pre">for</span> <span class="pre">DAS</span></code> to a new folder (not the one containing the original audio)—let’s call the folder <code class="docutils literal notranslate"><span class="pre">quickstart</span></code>. In the following dialog set start seconds and end seconds to the annotated time range: 0 and 18 seconds, respectively.</p>
<figure class="align-default" id="xb-export-fig">
<a class="reference internal image-reference" href="_images/xb_quick_export.png"><img alt="export audio and annotations" src="_images/xb_quick_export.png" style="width: 450px;" /></a>
<figcaption>
<p><span class="caption-text">Export audio data and annotations for the annotated range from 0 to 18 seconds.</span><a class="headerlink" href="#xb-export-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>Then make a dataset, via <em>DAS/Make dataset for training</em>. In the file dialog, select the <code class="docutils literal notranslate"><span class="pre">quickstart</span></code> folder you exported your annotations into. In the next dialog, we will adjust how data is split into training, validation and testing data. For the small data set annotated in the first step of this tutorial, we will not test the model, to maximize the data available for optimizing the network (training and validation). Set the training split to 0.60,  the validation split to 0.40 and the test split to 0.00 (not test):</p>
<figure class="align-default" id="xb-assemble-fig">
<a class="reference internal image-reference" href="_images/xb_quick_make_ds.png"><img alt="assemble dataset" src="_images/xb_quick_make_ds.png" style="width: 600px;" /></a>
<figcaption>
<p><span class="caption-text">Make a dataset for training.</span><a class="headerlink" href="#xb-assemble-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>This will create a dataset folder called <code class="docutils literal notranslate"><span class="pre">quickstart.npy</span></code> that contains the audio data and the annotations formatted for training.</p>
</section>
<section id="fast-training">
<h2>Fast training<a class="headerlink" href="#fast-training" title="Permalink to this headline">#</a></h2>
<p>Configure a network and start training via <em>DAS/Train</em>. This will ask you to select folder with the dataset you just created, <code class="docutils literal notranslate"><span class="pre">quickstart.npy</span></code>. Then, a dialog allows you to configure the network. For the fast training change the following:</p>
<ul class="simple">
<li><p>Set <code class="docutils literal notranslate"><span class="pre">Downsampling</span> <span class="pre">frontend</span></code> to <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p>Set both <code class="docutils literal notranslate"><span class="pre">Number</span> <span class="pre">of</span> <span class="pre">filters</span></code> and <code class="docutils literal notranslate"><span class="pre">Filter</span> <span class="pre">duration</span> <span class="pre">(samples)</span></code> to 16. This will result in a smaller network with fewer parameters, which will train faster.</p></li>
<li><p>Set <code class="docutils literal notranslate"><span class="pre">Number</span> <span class="pre">of</span> <span class="pre">epochs</span></code> to 10, to finish training earlier.</p></li>
</ul>
<figure class="align-default" id="xb-train-fig">
<a class="reference internal image-reference" href="_images/xb_quick_train.png"><img alt="train" src="_images/xb_quick_train.png" style="width: 500px;" /></a>
<figcaption>
<p><span class="caption-text">Train options</span><a class="headerlink" href="#xb-train-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>Then hit <code class="docutils literal notranslate"><span class="pre">Start</span> <span class="pre">training</span> <span class="pre">in</span> <span class="pre">GUI</span></code>—this will start training in a background process. A small window will display training progress (see also the output in the terminal). Training with this small dataset will finish in 10 minutes on a CPU and in 2 minutes on a GPU. For larger datasets, we highly recommend training on a machine with a discrete Nvidia GPU.</p>
</section>
<section id="predict">
<h2>Predict<a class="headerlink" href="#predict" title="Permalink to this headline">#</a></h2>
<p>Once training finished, generate annotations using the trained network via <em>DAS/Predict</em>. This will ask you to select a model file containing the trained model. Training creates files in the <code class="docutils literal notranslate"><span class="pre">quickstart.res</span></code> folder, starting with the time stamp of training—select the file ending in <code class="docutils literal notranslate"><span class="pre">_model.h5</span></code>.</p>
<p>In the next dialog, predict song for 60 seconds starting after your manual annotations:</p>
<ul class="simple">
<li><p>Set <code class="docutils literal notranslate"><span class="pre">Start</span> <span class="pre">seconds</span></code> to 18 and <code class="docutils literal notranslate"><span class="pre">End</span> <span class="pre">seconds</span></code> to 78.</p></li>
<li><p>Make sure that <code class="docutils literal notranslate"><span class="pre">Proof</span> <span class="pre">reading</span> <span class="pre">mode</span></code> is enabled. That way, annotations created by the network will be assigned names ending in <code class="docutils literal notranslate"><span class="pre">_proposals</span></code> - in our case <code class="docutils literal notranslate"><span class="pre">sine_proposals</span></code> and <code class="docutils literal notranslate"><span class="pre">pulse_proposals</span></code>. The proposals will be transformed into proper <code class="docutils literal notranslate"><span class="pre">sine</span></code> and <code class="docutils literal notranslate"><span class="pre">pulse</span></code> annotations during proof reading.</p></li>
<li><p>Enable <code class="docutils literal notranslate"><span class="pre">Fill</span> <span class="pre">gaps</span> <span class="pre">shorter</span> <span class="pre">than</span> <span class="pre">(seconds)</span></code> and <code class="docutils literal notranslate"><span class="pre">Delete</span> <span class="pre">segments</span> <span class="pre">shorter</span> <span class="pre">than</span> <span class="pre">(seconds)</span></code> by unchecking both check boxes.</p></li>
</ul>
<figure class="align-default" id="xb-predict-fig">
<a class="reference internal image-reference" href="_images/xb_quick_predict.png"><img alt="predict" src="_images/xb_quick_predict.png" style="width: 750px;" /></a>
<figcaption>
<p><span class="caption-text">Predict annotations for the next 60 seconds of audio.</span><a class="headerlink" href="#xb-predict-fig" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>In contrast to training, prediction is very fast, and does not require a GPU—it should finish after 30 seconds. The proposed annotations should be already good. Most pulses should be correctly detected. Sine song is harder to predict and may be often or chopped up into multiple segments with gaps in between.</p>
</section>
<section id="proof-reading">
<h2>Proof reading<a class="headerlink" href="#proof-reading" title="Permalink to this headline">#</a></h2>
<p>To turn the proposals into proper annotations, fix and approve them. Correct any prediction errors—add missing annotations, remove false positive annotations, adjust the timing of annotations. See <span class="xref myst">Create annotations</span> and <span class="xref myst">Edit annotations</span>. Once you have corrected all errors in the view, select the proposals type you want to fix (<code class="docutils literal notranslate"><span class="pre">sine_proposals</span></code> or <code class="docutils literal notranslate"><span class="pre">pulse_proposals</span></code>), and approve the corresponding annotations with <code class="docutils literal notranslate"><span class="pre">G</span></code>. This will rename the proposals in the view to the original names (for instance, <code class="docutils literal notranslate"><span class="pre">sine_proposals</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">sine</span></code>). Alternatively, <code class="docutils literal notranslate"><span class="pre">H</span></code> will approve proposals of all song types in view.</p>
</section>
<section id="go-back-to-export">
<h2>Go back to “Export”<a class="headerlink" href="#go-back-to-export" title="Permalink to this headline">#</a></h2>
<p>Once all proposals have been approved, export all annotations (now between 0 and 78 seconds), make a new dataset, train, predict, and repeat. Every prediction should use the latest model in the <code class="docutils literal notranslate"><span class="pre">quickstart.res</span></code> folder. If prediction performance is adequate, fully train the network by increasing the <code class="docutils literal notranslate"><span class="pre">Number</span> <span class="pre">of</span> <span class="pre">epochs</span></code> to a larger number (400, for example), and this time using a completely new recording as the test set. Alternatively, you can use the same recording and split by samples.</p>
<p>Once the model is good enough to predict on new recordings, uncheck  <code class="docutils literal notranslate"><span class="pre">Proof</span> <span class="pre">reading</span> <span class="pre">mode</span></code> on these recordings so the annotations produced have the proper ‘pulse’ and ‘sine’ labels.</p>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="tutorials_gui/tutorials_gui.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">GUI documentation</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="installation.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Installation</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2021, Jan Clemens
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Quick start tutorial (fly)</a><ul>
<li><a class="reference internal" href="#download-example-data">Download example data</a></li>
<li><a class="reference internal" href="#start-the-gui">Start the GUI</a></li>
<li><a class="reference internal" href="#load-audio-data">Load audio data</a></li>
<li><a class="reference internal" href="#waveform-and-spectrogram-display">Waveform and spectrogram display</a></li>
<li><a class="reference internal" href="#initialize-or-edit-song-types">Initialize or edit song types</a></li>
<li><a class="reference internal" href="#create-annotations-manually">Create annotations manually</a></li>
<li><a class="reference internal" href="#annotate-by-thresholding-the-waveform">Annotate by thresholding the waveform</a></li>
<li><a class="reference internal" href="#edit-annotations">Edit annotations</a></li>
<li><a class="reference internal" href="#export-annotations-and-make-a-dataset">Export annotations and make a dataset</a></li>
<li><a class="reference internal" href="#fast-training">Fast training</a></li>
<li><a class="reference internal" href="#predict">Predict</a></li>
<li><a class="reference internal" href="#proof-reading">Proof reading</a></li>
<li><a class="reference internal" href="#go-back-to-export">Go back to “Export”</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/scripts/furo.js"></script>
    <script src="_static/tabs.js"></script>
    <script src="_static/sphinxcontrib-images/LightBox2/lightbox2/dist/js/lightbox-plus-jquery.min.js"></script>
    <script src="_static/sphinxcontrib-images/LightBox2/lightbox2-customize/jquery-noconflict.js"></script>
    </body>
</html>